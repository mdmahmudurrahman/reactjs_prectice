<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="build/react.js"></script>
    <script src="build/react-dom.js"></script>
    <script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>

  </head>
  <body>
    <div id="view">
    </div>
    <script type="text/babel">
      var HelloMessage = React.createClass({
        componentWillMount: function() {
          console.log('componentWillMount');
          },
          componentDidMount: function() {
          console.log('componentDidMount');
          },
          componentWillUnmount: function() {
          console.log('componentWillUnmount');
          },
          render: function() {
          console.log('render');
          return <h2>{this.props.message}</h2>;
          }
        });

      var Button = React.createClass({
        render: function() {
          return (
            <button onClick={this.props.onClick}>{this.props.children}</button>
          );
        }
      });
      
      var GlyphIcon = React.createClass({
        render: function() {
          return (
            <span className={'glyphicon glyphicon-' + this.props.icon}></span>
          );
        }
      });

      var TextBox = React.createClass({
        getInitialState: function() {
          return { isEditing: false, text: this.props.label }
        },
        update: function() {
          this.setState({
            text: this.refs.messageTextBox.value, isEditing: false
          });
          this.props.update();
        },
        edit: function() {
          this.setState({ isEditing: true});
        },
        render: function() {
          return (
          <div>
            {this.props.label}<br/>
            <input type='text' ref='messageTextBox' disabled={!this.state.isEditing}/>
            {
              this.state.isEditing ?
              <Button onClick={this.update}><GlyphIcon icon='ok'/>Update</Button>
              :
              <Button onClick={this.edit}><GlyphIcon icon='pencil'/>Edit</Button>
            }
          </div>
          );
        }
      });

      var HelloReact = React.createClass({
        getInitialState: function () {
          return { firstName: '', lastName: ''}
        },
        update: function () {
            this.setState({
            firstName: this.refs.firstName.refs.messageTextBox.value,
            lastName: this.refs.lastName.refs.messageTextBox.value
          });
        },
        render: function() {
          return (
            <div>
              <HelloMessage message={'Hello ' + this.state.firstName + ' ' + this.state.lastName}>
              </HelloMessage>
              <TextBox label='First Name' ref='firstName' update={this.update}>
              </TextBox>
              <TextBox label='Last Name' ref='lastName' update={this.update}>
              </TextBox>
            </div>
          );
        }
      });
      ReactDOM.render(<HelloReact/>, document.getElementById('view'));  
    </script>
  </body>
</html>